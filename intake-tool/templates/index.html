<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Parser - Dark Mode</title>
    <!-- Tailwind CSS CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="bg-gray-900 text-gray-100">
    <div class="background-overlay"></div>
    <div class="grid-overlay"></div>
    <div class="parallax-stars"></div>
    <div class="container mx-auto p-4">
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-blue-400">Email Parser</h1>
            <div class="status-container flex items-center justify-center mt-2">
                <span class="text-sm mr-2">LM Studio Status:</span>
                <span id="lmStatus" class="status-badge">Checking...</span>
            </div>
        </header>

        <main class="flex flex-col lg:flex-row gap-6">
            <!-- Input Section -->
            <section class="input-section bg-gray-800 rounded-lg p-4 flex-1 relative scroll-perf-container">
                <h2 class="text-lg font-semibold mb-3 text-blue-400">Input Email</h2>
                <div class="controls mb-4">
                    <button id="loadSample" class="btn">Load Sample</button>
                    <button id="clearBtn" class="btn">Clear</button>
                    <span id="charCount" class="char-counter">0 characters</span>
                </div>
                <div class="relative">
                    <!-- Syntax Highlighting Layer -->
                    <pre id="highlighting" class="highlighting"></pre>
                    <!-- Actual Textarea -->
                    <textarea 
                        id="emailContent" 
                        class="w-full bg-transparent text-transparent caret-white p-4 rounded-lg resize-none focus:outline-none font-mono text-base overflow-hidden relative z-10"
                        placeholder="beep BOOP beep GIMMIE TXT..."
                        data-autoresize
                        aria-label="Email Content"
                        role="textbox"
                        tabindex="0"
                    ></textarea>
                </div>
                <button 
                    id="parseButton" 
                    class="w-full mt-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg font-semibold transition-colors relative z-10"
                >
                    Parse Email
                </button>
                <div id="progressIndicator" class="progress hidden flex items-center justify-center mt-2 relative z-10">
                    <div class="spinner mr-2"></div>
                    <span>Processing...</span>
                </div>
                <!-- Loading Bar -->
                <div class="loading-bar hidden"></div>
            </section>

            <!-- Output Section -->
            <section class="results-section bg-gray-800 rounded-lg p-4 flex-grow scroll-perf-container">
                <h2 class="text-lg font-semibold mb-3 text-blue-400">Parsed Output</h2>
                <div class="export-buttons flex gap-4 mt-4">
                    <button id="exportPdfButton" class="btn bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg">
                        Export to PDF
                    </button>
                    <button id="exportCsvButton" class="btn bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg">
                        Export to CSV
                    </button>
                </div>
                <div id="results" class="w-full bg-gray-700 text-gray-100 p-4 rounded-lg overflow-auto font-mono text-sm whitespace-pre-wrap">
                    <span class="default-text">Parsed content will appear here...</span>
                </div>
                
            </section>
        </main>
    </div>

    <!-- Custom Scripts -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
